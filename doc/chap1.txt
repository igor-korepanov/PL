  
  [1X1 [33X[0;0YШаровые комплексы.[133X[101X
  
  [33X[0;0YPiecewise-linear, or simply PL, ball complexes are, at least at this moment,
  the  central  objects with which our package [22XPL[122X deals. First, a ball complex
  is,  simply speaking, a kind of cell complex but such where all [13Xclosed[113X cells
  (  =  balls)  are  [13Xembedded[113X.  In  particular,  their  boundaries are genuine
  spheres,  not  crumpled/folded.  The  formal  definition  of [22XPL[122X ball complex
  reads:  A  PL  ball complex is a pair [22X(X, U)[122X, where [22XX[122X is a compact Euclidean
  polyhedron  and  [22XU[122X  is  a  covering  of  [22XX[122X  by closed PL-balls such that the
  following axioms are satisfied:[133X
  
  [30X    [33X[0;6Ythe relative interiors of balls from [22XU[122X form a partition of [22XX[122X,[133X
  
  [30X    [33X[0;6Ythe boundary of each ball from [22XU[122X is a union of balls from [22XU[122X.[133X
  
  [33X[0;0YWe  also  call  PL  ball  complexes ``polytopes'', for brevity, hence prefix
  ``Pol'' in the names of some of our functions.[133X
  
  
  [1X1.1 [33X[0;0YRepresentation of a PL ball complex[133X[101X
  
  [33X[0;0YA   [22XPL[122X-ball   complex   is  defined  up  to  [22XPL[122X-homeomorphism  only  by  the
  combinatorics  of  adjunctions  of its balls. Due to this, we represent them
  combinatorially  in the following way. First, we assume that all vertices in
  the  complex  are  numbered from 1 to their total number [22XN_0[122X. Hence, in this
  sense,  the  0-skeleton of the complex is described. Next, assuming that the
  [22Xk[122X-skeleton is already given, which implies (in particular) the numeration of
  all  [22Xk[122X-cells, we describe the [22X(k+1)[122X-skeleton as the list of all [22X(k+1)[122X-cells,
  each  of  which,  in  its  turn,  is  the  set  of numbers of [22Xk[122X-cells in its
  boundary.  Then we compose the list of length [22Xn[122X, where [22Xn[122X is the dimension of
  the   complex,  whose  elements  are  lists  of  1-,...,  [22Xn[122X-cells.  Thus,  a
  three-dimensional  ball  [22XB^3[122X  can  be  represented  by the following [22XPL[122X ball
  complex with two vertices 1 and 2:[133X
  
  [4X[32X  Пример  [32X[104X
    [4X[28X[[128X[104X
    [4X[28X  [ [1,2], [1,2] ], # two one-dimensional simplexes, each with[128X[104X
    [4X[28X                    # ends 1 and 2, of which the first is referred to[128X[104X
    [4X[28X                    # in the next line as 1, the second - as 2;[128X[104X
    [4X[28X  [ [1,2], [1,2] ], # two disks - bigons - bounded each by[128X[104X
    [4X[28X                    # one-dimensional simplexes 1 and 2;[128X[104X
    [4X[28X  [ [1,2] ]         # the three-ball bounded by bigons 1 and 2[128X[104X
    [4X[28X][128X[104X
    [4X[28X			[128X[104X
  [4X[32X[104X
  
  [33X[0;0YТУТ БЫ НАДО ВСТАВИТЬ КАРТИНКУ Actually, we add a list of vertices with their
  names  or  something  like  that  in the beginning of the above ball complex
  representation. For instance, our function [10XballAB[110X[22X(n)[122X calls them [10X"A"[110X and [10X"B"[110X.
  So,  our  [5XGAP[105X  representation  of  the  ball  in  Figure~\ref{fig:B3} is the
  following record:[133X
  
  [4X[32X  Пример  [32X[104X
    [4X[25Xgap>[125X [27XballAB(3);  [127X[104X
    [4X[28Xrec( vertices := [ "A", "B" ], [128X[104X
    [4X[28X  faces := [ [ [ 1, 2 ], [ 1, 2 ] ], [ [ 1, 2 ], [ 1, 2 ] ], [ [ 1, 2 ] ] ] [128X[104X
    [4X[28X )[128X[104X
    [4X[28X			[128X[104X
  [4X[32X[104X
  
  [1X1.1-1 IsPolytope[101X
  
  [29X[2XIsPolytope[102X( [3Xpol[103X ) [32X функция
  
  [33X[0;0YФункция  проверяет  формальные  признаки  структуры  [22Xpol[122X  в  соответствии  с
  правилами  задания  политопов.  Если данные построены корректным образом, то
  функция выдаст [22Xtrue[122X и [22Xfalse[122X в противном случае.[133X
  
  [4X[32X  Пример  [32X[104X
    [4X[25Xgap>[125X [27XIsPolytope(T2);[127X[104X
    [4X[28Xtrue[128X[104X
    [4X[28X				[128X[104X
  [4X[32X[104X
  
  [33X[0;0YТак  как  нет единого алгоритма распознавания [22Xn-[122Xмерной сферы, проверка того,
  что  каждая  клетка  является шаром опушена. Это может породить ошибку когда
  данные  удовлетворяют  всем  формальным  признакам,  но  политоп не является
  шаровым. В данном случае программа, все равно выдаст [22Xtrue[122X вместо положенного
  [22Xfalse.[122X[133X
  
  
  [1X1.2 [33X[0;0YУказывающие функции[133X[101X
  
  [33X[0;0YВ   данном  разделе  представлены  функции  которые  могут  либо  распознать
  многообразие по политопу, либо вычислить инвариант этого многообразия.[133X
  
  [1X1.2-1 EulerNumber[101X
  
  [29X[2XEulerNumber[102X( [3Xpol[103X ) [32X функция
  
  [33X[0;0Yфункция  вычисляет  число  Эйлера  для  шарового  комплекса.  Данная функция
  полиморфна   и   способна  принимать  для  вычислений  данные  типа  политоп
  (IsPolytope),  именнованные  списки  по  размерностям  в  котором содержится
  структура  политопа и именованный список по размерностям элементами которого
  могут выступать количества клеток определенной размерности.[133X
  
  [4X[32X  Пример  [32X[104X
    [4X[25Xgap>[125X [27XEulerNumber(T2);[127X[104X
    [4X[28X0[128X[104X
    [4X[25Xgap>[125X [27XEulerNumber(sphereAB(4));[127X[104X
    [4X[28X2[128X[104X
    [4X[25Xgap>[125X [27XEulerNumber(sphereAB(3));[127X[104X
    [4X[28X0[128X[104X
    [4X[28X					[128X[104X
  [4X[32X[104X
  
  [1X1.2-2 FundGroup[101X
  
  [29X[2XFundGroup[102X( [3Xpol[103X ) [32X функция
  
  [33X[0;0YComputes the fundamental group of the given polytope.[133X
  
  
  [1X1.3 [33X[0;0YОбщая информация о шаровом комплексе[133X[101X
  
  [1X1.3-1 LengthPol[101X
  
  [29X[2XLengthPol[102X( [3Xpol[103X ) [32X функция
  
  [33X[0;0YВ [22Xresul.d[122X указывается мощьность [22Xd[122X-мерного остова в политопе [22Xpol.[122X[133X
  
  [4X[32X  Пример  [32X[104X
    [4X[25Xgap>[125X [27XLengthPol(T2);[127X[104X
    [4X[28Xtotal16[128X[104X
    [4X[28Xrec( 0 := 4, 1 := 8, 2 := 4 )[128X[104X
    [4X[28X					  	[128X[104X
  [4X[32X[104X
  
  [1X1.3-2 PolBoundary[101X
  
  [29X[2XPolBoundary[102X( [3Xpol[103X ) [32X функция
  
  [33X[0;0Yвычисляет  границу политопа. На выход подает список в котором указаны только
  клетки размерности [22X(n-1)[122X составляющие границу.[133X
  
  [4X[32X  Пример  [32X[104X
    [4X[25Xgap>[125X [27XPolBoundary(T2);[127X[104X
    [4X[28X[ ][128X[104X
    [4X[25Xgap>[125X [27Xs1:=sphereAB(1);;[127X[104X
    [4X[25Xgap>[125X [27Xd2:=ballAB(2);;[127X[104X
    [4X[25Xgap>[125X [27Xft2:=PolProduct(d2,s1);;[127X[104X
    [4X[25Xgap>[125X [27XPolBoundary(ft2);[127X[104X
    [4X[28X[ 1, 2, 3, 4 ][128X[104X
    [4X[28X						[128X[104X
  [4X[32X[104X
  
  [33X[0;0YВ  данном  примере  [22XT2[122X является тором, [22Xs1[122X - одномерная сфера, [22Xd2[122X - двумерный
  диск  и  [22Xft2[122X  -  полноторие  созданное  как декартово произведение 2-диска и
  1-сферы.[133X
  
  [1X1.3-3 PolInnerFaces[101X
  
  [29X[2XPolInnerFaces[102X( [3Xpol[103X ) [32X функция
  
  [33X[0;0YBuild  index  of  inner faces of given polytope complex [22Xreturned[i][122X - set of
  inner  faces  of  dimensions  (i-1).  Any  face is outer if it has at most 1
  adjacent  face  of  higher dimension of if it lies in the boundary of such a
  face. And inner faces are not outer faces.[133X
  
  [4X[32X  Пример  [32X[104X
    [4X[25Xgap>[125X [27XPolInnerFaces(T2);[127X[104X
    [4X[28X[ [ 1 .. 4 ], [ 1 .. 8 ] ][128X[104X
    [4X[25Xgap>[125X [27XPolInnerFaces(ft2);[127X[104X
    [4X[28X[ [  ], [  ], [ 5, 6 ] ][128X[104X
    [4X[28X						[128X[104X
  [4X[32X[104X
  
  [1X1.3-4 MaxTree[101X
  
  [29X[2XMaxTree[102X( [3Xpol[103X ) [32X функция
  
  [33X[0;0Yfinds a maximal tree in the 1-skeleton of a polytope as a list of edges.[133X
  
  [1X1.3-5 CellOrient[101X
  
  [29X[2XCellOrient[102X( [3Xpol[103X ) [32X функция
  
  [33X[0;0YProvides inductively some orientations for cells of dimensions [22X1..n=dim(pol)[122X[133X
  
  [4X[32X  Пример  [32X[104X
    [4X[25Xgap>[125X [27Xs3:=sphereAB(3);;[127X[104X
    [4X[25Xgap>[125X [27XCellOrient(s3);[127X[104X
    [4X[28X[ [ [ -1, 1 ], [ -1, 1 ] ], [ [ -1, 1 ], [ -1, 1 ] ], [ [ -1, 1 ], [ -1, 1 ] ] ][128X[104X
    [4X[28X						[128X[104X
  [4X[32X[104X
  
  [1X1.3-6 PolOrient[101X
  
  [29X[2XPolOrient[102X( [3Xpol[103X ) [32X функция
  
  [33X[0;0YIf   [22Xpol[122X   is   orientable,   gives  a  consistent  orientation  of  [22Xn-[122Xfaces
  ([22Xn=dim(pol)[122X), otherwise returns [22Xfail.[122X[133X
  
  [1X1.3-7 OrientTriangulated[101X
  
  [29X[2XOrientTriangulated[102X( [3Xpol[103X ) [32X функция
  
  [33X[0;0YFunction  computes consistent orientation on simpleces of greatest dimension
  on  a  given  triangulated  complex  [22Xpol.[122X  Returns  array  of  -1, 1-s which
  correspond to the orientation of simplices of greatest dimension of [22Xpol.[122X[133X
  
  [1X1.3-8 dataPachner[101X
  
  [29X[2XdataPachner[102X( [3Xdim[103X, [3Xk[103X ) [32X функция
  
  [33X[0;0YВыводит  информацию  о  указанном  движении Пахнера размерности [22Xdim[122X, один из
  кластеров  которого  содержит  [22Xk[122X  - симплексов, все информация принадлежащая
  данному   кластеру  условно  обозначена  буквой  [22Xl[122X  (left).  Второй  кластер
  симплексов  получающийся  при  преобразованиях  Пахнера  обозначен  буквой [22Xr[122X
  (right).[133X
  
  [4X[32X  Пример  [32X[104X
    [4X[25Xgap>[125X [27XPrint(dataPachner(3,2));[127X[104X
    [4X[28Xrec([128X[104X
    [4X[28X  l := rec([128X[104X
    [4X[28X      pol := rec([128X[104X
    [4X[28X          faces :=[128X[104X
    [4X[28X           [[128X[104X
    [4X[28X              [ [ 1, 2 ], [ 1, 3 ], [ 2, 3 ], [ 1, 4 ], [ 2, 4 ], [ 3, 4 ],[128X[104X
    [4X[28X                  [ 1, 5 ], [ 2, 5 ], [ 3, 5 ] ],[128X[104X
    [4X[28X              [ [ 1, 4, 5 ], [ 1, 7, 8 ], [ 2, 4, 6 ], [ 2, 7, 9 ],[128X[104X
    [4X[28X                  [ 3, 5, 6 ], [ 3, 8, 9 ], [ 1, 2, 3 ] ],[128X[104X
    [4X[28X              [ [ 1, 3, 5, 7 ], [ 2, 4, 6, 7 ] ] ],[128X[104X
    [4X[28X          vertices := [ 1, 2, 3, 4, 5 ] ),[128X[104X
    [4X[28X      sim := [ [ 1, 2, 3, 4 ], [ 1, 2, 3, 5 ] ],[128X[104X
    [4X[28X      vnut := [ 7 ] ),[128X[104X
    [4X[28X  r := rec([128X[104X
    [4X[28X      pol := rec([128X[104X
    [4X[28X          faces :=[128X[104X
    [4X[28X           [[128X[104X
    [4X[28X              [ [ 1, 2 ], [ 1, 4 ], [ 2, 4 ], [ 1, 5 ], [ 2, 5 ], [ 4, 5 ],[128X[104X
    [4X[28X                  [ 1, 3 ], [ 3, 4 ], [ 3, 5 ], [ 2, 3 ] ],[128X[104X
    [4X[28X              [ [ 1, 2, 3 ], [ 1, 4, 5 ], [ 2, 7, 8 ], [ 4, 7, 9 ],[128X[104X
    [4X[28X                  [ 3, 8, 10 ], [ 5, 9, 10 ], [ 2, 4, 6 ], [ 3, 5, 6 ],[128X[104X
    [4X[28X                  [ 6, 8, 9 ] ],[128X[104X
    [4X[28X              [ [ 1, 2, 7, 8 ], [ 3, 4, 7, 9 ], [ 5, 6, 8, 9 ] ] ],[128X[104X
    [4X[28X          vertices := [ 1, 2, 3, 4, 5 ] ),[128X[104X
    [4X[28X      sim := [ [ 1, 2, 4, 5 ], [ 1, 3, 4, 5 ], [ 2, 3, 4, 5 ] ],[128X[104X
    [4X[28X      vnut := [ 7, 8, 9 ] ) )[128X[104X
    [4X[28X  						[128X[104X
  [4X[32X[104X
  
  [33X[0;0YВ  каждой из этих двух записей [22X.l[122X или [22X.r[122X содержатся структуры [22X.pol[122X - задание
  кластера  в  виде  шарового  комплекса, [22X.sim[122X - представление кластера в виде
  симплексов,  то  есть  задание  симплексов через набор вершин на которые они
  натянуты и [22X.vnut[122X список внутренних [22X(n-1)-[122Xмерных клеток шарового комплекса.[133X
  
  [33X[0;0YСимплициальный  комплекс  может  быть  задан как набор симплексов, каждый из
  которых  представлен  списком  вершин  на  которые  он  натянут. При задании
  симплициальных  многообразий достаточно указать симплексы размерности [22Xn.[122X При
  этом  существенным  условием  является  то,  что  все  симплексы должны быть
  натянуты   на  различные  наборы  вершин.  Например  граница  четырехмерного
  симплекса может быть представлена как[133X
  
  [4X[32X  Пример  [32X[104X
    [4X[25Xgap>[125X [27Xsim:=[ [ 1, 2, 3, 4 ], [ 1, 2, 3, 5 ], [ 1, 2, 4, 5 ],[127X[104X
    [4X[28X				[ 1, 3, 4, 5 ], [ 2, 3, 4, 5 ] ];[128X[104X
    [4X[28X				[128X[104X
  [4X[32X[104X
  
  [1X1.3-9 FromSimplexToPolytope[101X
  
  [29X[2XFromSimplexToPolytope[102X( [3Xsimplex[103X ) [32X функция
  
  [33X[0;0Yпреобразует список симплексов в шаровой комплекс.[133X
  
  [4X[32X  Пример  [32X[104X
    [4X[25Xgap>[125X [27XFromSimplexToPolytope(sim);[127X[104X
    [4X[28Xrec([128X[104X
    [4X[28X  faces :=[128X[104X
    [4X[28X    [ [ [ 1, 2 ], [ 1, 3 ], [ 2, 3 ], [ 1, 4 ], [ 2, 4 ], [ 3, 4 ], [ 1, 5 ],[128X[104X
    [4X[28X          [ 2, 5 ], [ 3, 5 ], [ 4, 5 ] ],[128X[104X
    [4X[28X      [ [ 1, 2, 3 ], [ 1, 4, 5 ], [ 2, 4, 6 ], [ 3, 5, 6 ], [ 1, 7, 8 ],[128X[104X
    [4X[28X          [ 2, 7, 9 ], [ 3, 8, 9 ], [ 4, 7, 10 ], [ 5, 8, 10 ], [ 6, 9, 10 ] ][128X[104X
    [4X[28X        , [ [ 1, 2, 3, 4 ], [ 1, 5, 6, 7 ], [ 2, 5, 8, 9 ], [ 3, 6, 8, 10 ],[128X[104X
    [4X[28X          [ 4, 7, 9, 10 ] ] ], vertices := [ 1, 2, 3, 4, 5 ] )[128X[104X
    [4X[28X						[128X[104X
  [4X[32X[104X
  
  
  [1X1.4 [33X[0;0YРабота с клетками[133X[101X
  
  [33X[0;0YВ данном разделе собраны все функции позволяющие узнать информацию связанную
  с  какой-либо  клеткой в pl-разбиении многообразия. Клетка в pl-многообразии
  указывается как пара чисел [dim,ind], первое из которых dim есть размерность
  клетки,  второе  ind  - позиция клетки в списке pol.faces[dim]. Такую пару в
  описании  программ мы будет называть адресом клетки или клеткой, обозначение
  [22Xadr.[122X[133X
  
  [1X1.4-1 PolBnd[101X
  
  [29X[2XPolBnd[102X( [3Xpol[103X, [3Xadr[103X ) [32X функция
  
  [33X[0;0YCreating  an  index  of boundary faces of face [22Xadr=[dim,ind][122X of complex [22Xpol[122X.
  [22Xresult[i][122X  -  index  of  (i-1)-dimensional  faces  of  [22Xpol[122X  which are in the
  boundary of [22Xadr[122X.[133X
  
  [4X[32X  Пример  [32X[104X
    [4X[25Xgap>[125X [27XPolBnd(T2,[2,3]);[127X[104X
    [4X[28X[ [ 1, 2, 3, 4 ], [ 2, 4, 5, 7 ] ][128X[104X
    [4X[28X						[128X[104X
  [4X[32X[104X
  
  [1X1.4-2 FaceComp[101X
  
  [29X[2XFaceComp[102X( [3Xpol[103X, [3Xadr[103X ) [32X функция
  
  [33X[0;0Yфункция  аналогичная  функции  [22XPolBnd,[122X  выходные данные в функции собраны по
  размерностям. Сама клетка тоже включена в вывод как составляющая часть самой
  себя.[133X
  
  [4X[32X  Пример  [32X[104X
    [4X[25Xgap>[125X [27XFaceComp(T2,[2,3]);[127X[104X
    [4X[28Xrec( 0 := [ 1, 2, 3, 4 ], 1 := [ 2, 4, 5, 7 ], 2 := [ 3 ] )[128X[104X
    [4X[28X						[128X[104X
  [4X[32X[104X
  
  [33X[0;0YКак  видно  из  примера  каждая  именованное  поле  соответствует  некоторой
  размерности.[133X
  
  [1X1.4-3 StarFace[101X
  
  [29X[2XStarFace[102X( [3Xpol[103X, [3Xadr[103X ) [32X функция
  
  [33X[0;0YВычисляет  все  клетки  которые  содержат клетку [22Xadr[122X в политопе [22Xpol[122X. Другими
  словами  функция  вычисляет  звезду  указанной  клетки.  result.(i) содержит
  индексы [22Xi-[122Xклеток входящих в состав звезды.[133X
  
  [4X[32X  Пример  [32X[104X
    [4X[25Xgap>[125X [27XStarFace(T2,[0,3]);[127X[104X
    [4X[28Xrec( 1 := [ 2, 3, 6, 7 ], 2 := [ 1, 2, 3, 4 ] )[128X[104X
    [4X[28X						[128X[104X
  [4X[32X[104X
  
  [33X[0;0YВ  данном примере 1-клетки с индексами 2, 3, 6 и 7 и 2-клетки с индексами 1,
  2, 3 и 4 образуют звезду вершины 3 данного шарового разбиения.[133X
  
  [1X1.4-4 PolCheckComb[101X
  
  [29X[2XPolCheckComb[102X( [3Xpol[103X, [3Xadr[103X ) [32X функция
  
  [33X[0;0Ycheck  if  a face of given complex is combinatorial complex that is, whether
  every  its subface of lower dimension is uniquely determined by its vertices
  (and dimension)[133X
  
  
  [1X1.5 [33X[0;0YИзменение [22Xpl-[122X[101X[1Xразбиения (не изменяющие)[133X[101X
  
  [33X[0;0YФункции    которые   изменяют   представленное   разбиение   без   изменения
  многообразия.[133X
  
  [1X1.5-1 PolTriangulate[101X
  
  [29X[2XPolTriangulate[102X( [3Xpol[103X ) [32X функция
  
  [33X[0;0Yфункция  создает  триангуляцию  политопа  [22Xpol[122X.  Заметим,  что  политоп после
  триангуляции может остаться не комбинаторным.[133X
  
  [4X[32X  Пример  [32X[104X
    [4X[25Xgap>[125X [27XPolTriangulate(sphereAB(2));[127X[104X
    [4X[28Xrec([128X[104X
    [4X[28X  faces := [ [ [ 1, 2 ], [ 1, 2 ], [ 1, 3 ], [ 2, 3 ], [ 1, 4 ], [ 2, 4 ] ],[128X[104X
    [4X[28X      [ [ 1, 3, 4 ], [ 2, 3, 4 ], [ 1, 5, 6 ], [ 2, 5, 6 ] ] ],[128X[104X
    [4X[28X  vertices := [ "A", "B", "V1", "V2" ] )[128X[104X
    [4X[28X						[128X[104X
  [4X[32X[104X
  
  [33X[0;0YTriangulating a polytope.[133X
  
  [1X1.5-2 FirstBoundary[101X
  
  [29X[2XFirstBoundary[102X( [3Xpol[103X ) [32X функция
  
  [33X[0;0Yданная  функция  создает  такое  упорядочение  клеток  политопа,  что клетки
  лежащие  на  границе  имеют  наименьшие  индексы  в  списках pol.faces[dim].
  Внутренний  порядок  клеток  на  границе остается неизменным (имеется в виду
  порядок клеток созданный индексацией внутри политопа).[133X
  
  [1X1.5-3 PermFaces[101X
  
  [29X[2XPermFaces[102X( [3Xpol[103X, [3Xperm[103X, [3Xdim[103X ) [32X функция
  
  [33X[0;0Yпроизводит  переупорядочение  клеток  размерности  [22Xdim[122X  в  политопе  [22Xpol[122X  по
  перестановке [22Xperm.[122X[133X
  
  [33X[0;0YКлетку  размерности  [22Xd[122X  в  шаровом  комплексе  называем минимальной, если ее
  граница содержит только две клетки размерности [22X(d - 1)[122X[133X
  
  [1X1.5-4 ContractMiniFace[101X
  
  [29X[2XContractMiniFace[102X( [3Xpol[103X, [3Xadr[103X ) [32X функция
  
  [33X[0;0YВ  политопе  [22Xpol[122X  стягивается минимальная клетка [22Xadr.[122X Образом стягивания при
  этом является граничная клетка с меньшим индексом.[133X
  
  [4X[32X  Пример  [32X[104X
    [4X[25Xgap>[125X [27Xs1:=sphereTriangul(1);[127X[104X
    [4X[28Xrec( faces := [ [ [ 1, 2 ], [ 1, 3 ], [ 2, 3 ] ] ], vertices := [ 1 .. 3 ] )[128X[104X
    [4X[25Xgap>[125X [27Xs1:=ContractMiniFace(s1,[1,1]);[127X[104X
    [4X[28Xrec( faces := [ [ [ 1, 2 ], [ 1, 2 ] ] ], vertices := [ 1, 3 ] )[128X[104X
    [4X[28X						[128X[104X
  [4X[32X[104X
  
  [33X[0;0YВ некоторых случаях стягивание минимальной клетки невозможно, так как данные
  которые  мы  получим  после  стягивания  могут  не  оказаться [22Xpl-[122Xкомплексом.
  Программа  проведет  стягивание минимальной клетки в любом случае, даже если
  применение  функции  выведет  нас из категории шаровых комплексов. По этому,
  применение этой функции требует доказательства того, что после стягивание не
  нарушится  условие,  что  все клетки получившегося комплекса шары. Например,
  если  в примере описанном выше попробовать стянуть в окружности [22Xs1[122X ребро, то
  получим следующее[133X
  
  [4X[32X  Пример  [32X[104X
    [4X[25Xgap>[125X [27Xs1:=ContractMiniFace(s1,[1,1]);[127X[104X
    [4X[28Xrec( faces := [ [ [ 1 ] ] ], vertices := [ 1 ] )[128X[104X
    [4X[25Xgap>[125X [27XIsPolytope(s1);[127X[104X
    [4X[28Xfalse[128X[104X
    [4X[28X						[128X[104X
  [4X[32X[104X
  
  [33X[0;0YКак   видим  выходные  данные  не  являются  политопом.  По  этому  проверка
  допустимости данной операции остается за пользователем.[133X
  
  [1X1.5-5 DivideFace[101X
  
  [29X[2XDivideFace[102X( [3Xpol[103X, [3Xadr[103X, [3Xset[103X ) [32X функция
  
  [33X[0;0YПусть имеется клетка с адресом [22Xadr[122X размерности [22Xd=adr[1][122X и клетки [22Xset[122X лежащие
  на  границе  клетки  [22Xadr[122X образуют [22X(d-2)-[122Xмерную сферу [22XS^d-2[122X, тогда клетку [22Xadr[122X
  можно  разбить  на две части натянув на сферу [22XS^d-2[122X диск [22XD^d-1[122X внутри клетки
  [22Xadr[122X.[133X
  
  [4X[32X  Пример  [32X[104X
    [4X[25Xgap>[125X [27Xoctahedron;[127X[104X
    [4X[28Xrec([128X[104X
    [4X[28X  faces :=[128X[104X
    [4X[28X	[ [ [ 1, 2 ], [ 2, 3 ], [ 3, 4 ], [ 1, 4 ], [ 1, 5 ], [ 2, 5 ], [ 3, 5 ], [128X[104X
    [4X[28X  		[ 4, 5 ], [ 1, 6 ], [ 2, 6 ], [ 3, 6 ], [ 4, 6 ] ],[128X[104X
    [4X[28X	  [ [ 1, 5, 6 ], [ 2, 6, 7 ], [ 3, 7, 8 ], [ 4, 5, 8 ], [ 1, 9, 10 ],[128X[104X
    [4X[28X	  	[ 2, 10, 11 ], [ 3, 11, 12 ], [ 4, 9, 12 ] ], [ [ 1 .. 8 ] ] ], [128X[104X
    [4X[28X	vertices := [ 1 .. 6 ] )[128X[104X
    [4X[25Xgap>[125X [27XDivideFace(octahedron,[3,1],[1,2,3,4]);[127X[104X
    [4X[28Xrec([128X[104X
    [4X[28X  faces :=[128X[104X
    [4X[28X 	[ [ [ 1, 2 ], [ 2, 3 ], [ 3, 4 ], [ 1, 4 ], [ 1, 5 ], [ 2, 5 ], [ 3, 5 ],[128X[104X
    [4X[28X  		[ 4, 5 ], [ 1, 6 ], [ 2, 6 ], [ 3, 6 ], [ 4, 6 ] ],[128X[104X
    [4X[28X	  [ [ 1, 5, 6 ], [ 2, 6, 7 ], [ 3, 7, 8 ], [ 4, 5, 8 ], [ 1, 9, 10 ], [128X[104X
    [4X[28X	    [ 2, 10, 11 ], [ 3, 11, 12 ], [ 4, 9, 12 ], [ 1, 2, 3, 4 ] ],[128X[104X
    [4X[28X	  [ [ 1, 4, 2, 3, 9 ], [ 5, 6, 7, 8, 9 ] ] ], [128X[104X
    [4X[28X		vertices := [ 1 .. 6 ] )[128X[104X
    [4X[28X						[128X[104X
  [4X[32X[104X
  
  [33X[0;0YВ  случае  когда разбивается одномерная клетка, указанная клетка дробится на
  две части новой вершиной, вместо множества [22Xset[122X указывается имя новой вершины
  разбиения.[133X
  
  [4X[32X  Пример  [32X[104X
    [4X[25Xgap>[125X [27Xs1:=sphereAB(1);[127X[104X
    [4X[28Xrec( faces := [ [ [ 1, 2 ], [ 1, 2 ] ] ], vertices := [ "A", "B" ] )[128X[104X
    [4X[25Xgap>[125X [27XDivideFace(s1,[1,1],3);[127X[104X
    [4X[28Xrec( faces := [ [ [ 1, 3 ], [ 1, 2 ], [ 2, 3 ] ] ], vertices := [ "A", "B", 3 ] )[128X[104X
    [4X[28X						[128X[104X
  [4X[32X[104X
  
  [1X1.5-6 UnionFace[101X
  
  [29X[2XUnionFace[102X( [3Xpol[103X, [3Xkl1[103X, [3Xkl2[103X ) [32X функция
  
  [33X[0;0YНа  вход  функции  посылаются  две  клетки  одной  и  той же размерности для
  объединения  их  в одну клетку. По сути данной функцией реализуется обратная
  операция к функции [22XDivideFace[122X разбивающей клетку на две части.[133X
  
  [4X[32X  Пример  [32X[104X
    [4X[25Xgap>[125X [27XUnionFace(p3,[3,1],[3,2]);[127X[104X
    [4X[28Xrec([128X[104X
    [4X[28X  faces :=[128X[104X
    [4X[28X    [ [ [ 1, 2 ], [ 1, 3 ], [ 2, 3 ], [ 1, 4 ], [ 2, 4 ], [ 3, 4 ], [ 1, 5 ],[128X[104X
    [4X[28X          [ 2, 5 ], [ 3, 5 ], [ 4, 5 ] ],[128X[104X
    [4X[28X      [ [ 2, 4, 6 ], [ 2, 7, 9 ], [ 4, 7, 10 ], [ 3, 5, 6 ], [ 3, 8, 9 ],[128X[104X
    [4X[28X          [ 5, 8, 10 ], [ 1, 4, 5 ], [ 1, 7, 8 ] ],[128X[104X
    [4X[28X      [ [ 1, 2, 4, 5, 7, 8 ], [ 3, 6, 7, 8 ] ] ],[128X[104X
    [4X[28X  vertices := [ 1, 2, 3, 4, 5 ] )[128X[104X
    [4X[28X						[128X[104X
  [4X[32X[104X
  
  [33X[0;0YОбъединение  двух  клеток [22XD^k_1[122X и [22XD^k_2[122X в одну в политопе [22Xpol[122X можно провести
  только  в  том  случае если звезда пересечения этих клеток состоит только из
  [22XD^k_1[122X  и  [22XD^k_2[122X.  Для  проведения  объединения функция проверяет, что данные
  клетки пересекаются по одному диску. Если после объединения указанных клеток
  комплекс  перестанет  быть шаровым разбиением, то функция не будет проводить
  объединение,  на выход будет подан начальный политоп и информационная строка
  с пояснением почему функция отказывается работать.[133X
  
  [4X[32X  Пример  [32X[104X
    [4X[25Xgap>[125X [27XUnionFace(T2,[2,1],[2,3]);;[127X[104X
    [4X[28XThis faces intersected on some balls or not intersected.[128X[104X
    [4X[28XI cannot union the faces in a polytope.[128X[104X
    [4X[28X						[128X[104X
  [4X[32X[104X
  
  [1X1.5-7 PolSimplify[101X
  
  [29X[2XPolSimplify[102X( [3Xpol[103X ) [32X функция
  
  [33X[0;0YПроводит   упрощение   политопа   [22Xpol[122X  фукцией  UnionFaces.  Данная  функция
  перебирает  все возможности начиная с клеток максимальной размерности. Вновь
  появившиеся  возможности  функция  не  исследует.  По  этому  функцию  можно
  запускать несколько раз если целью стоит максимально упростить политоп.[133X
  
  [4X[32X  Пример  [32X[104X
    [4X[25Xgap>[125X [27Xa:=ballTriangul(3);;[127X[104X
    [4X[25Xgap>[125X [27XPolSimplify(a);[127X[104X
    [4X[28Xrec( faces := [ [ [ 1, 2 ], [ 1, 2 ] ], [ [ 1, 2 ], [ 1, 2 ] ], [ [ 1, 2 ] ][128X[104X
    [4X[28X     ], vertices := [ 1, 2 ] )[128X[104X
    [4X[28X						[128X[104X
  [4X[32X[104X
  
  
  [1X1.6 [33X[0;0YНепосредственное создание политопов[133X[101X
  
  [33X[0;0YДля  создания [22Xn-[122Xмерного диска и сферы имеются стандартные функции включенные
  в библиотеку[133X
  
  [1X1.6-1 ballAB[101X
  
  [29X[2XballAB[102X( [3Xdim[103X ) [32X функция
  
  [33X[0;0YСоздает минимально возможное шаровое разбиение диска размерности [22Xdim.[122X[133X
  
  [1X1.6-2 sphereAB[101X
  
  [29X[2XsphereAB[102X( [3Xdim[103X ) [32X функция
  
  [33X[0;0YСоздает минимально возможное pl-разбиение сферы размерности [22Xdim.[122X[133X
  
  [4X[32X  Пример  [32X[104X
    [4X[25Xgap>[125X [27XsphereAB(3);[127X[104X
    [4X[28Xrec([128X[104X
    [4X[28X  faces := [ [ [ 1, 2 ], [ 1, 2 ] ], [ [ 1, 2 ], [ 1, 2 ] ],[128X[104X
    [4X[28X      [ [ 1, 2 ], [ 1, 2 ] ] ], vertices := [ "A", "B" ] )[128X[104X
    [4X[28X						[128X[104X
  [4X[32X[104X
  
  [33X[0;0YВ  библиотеку так же включена функция создающая задание диска и сферы в виде
  триангулированных шаровых комплексов[133X
  
  [1X1.6-3 ballTriangul[101X
  
  [29X[2XballTriangul[102X( [3Xdim[103X ) [32X функция
  
  [33X[0;0YСоздает симплекс размерности [22Xdim[122X[133X
  
  [4X[32X  Пример  [32X[104X
    [4X[25Xgap>[125X [27XballTriangul(2);[127X[104X
    [4X[28Xrec( faces := [ [ [ 1, 2 ], [ 1, 3 ], [ 2, 3 ] ], [ [ 1 .. 3 ] ] ],[128X[104X
    [4X[28X  vertices := [ 1 .. 3 ] )[128X[104X
    [4X[28X						[128X[104X
  [4X[32X[104X
  
  [1X1.6-4 sphereTriangul[101X
  
  [29X[2XsphereTriangul[102X( [3Xdim[103X ) [32X функция
  
  [33X[0;0YТриангулированная сфера создается как граница [22X(dim+1)-[122Xмерного симплекса[133X
  
  [4X[32X  Пример  [32X[104X
    [4X[25Xgap>[125X [27XsphereTriangul(1);[127X[104X
    [4X[28Xrec( faces := [ [ [ 1, 2 ], [ 1, 3 ], [ 2, 3 ] ] ], vertices := [ 1 .. 3 ] )[128X[104X
    [4X[28X						[128X[104X
  [4X[32X[104X
  
  
  [1X1.7 [33X[0;0YТопологические операции[133X[101X
  
  [1X1.7-1 FreeUnionPol[101X
  
  [29X[2XFreeUnionPol[102X( [3Xpol1[103X, [3Xpol2[103X ) [32X функция
  
  [33X[0;0YСвободное объединение политопов.[133X
  
  [4X[32X  Пример  [32X[104X
    [4X[25Xgap>[125X [27XFreeUnionPol(s1,s1);[127X[104X
    [4X[28Xrec( faces := [ [ [ 1, 2 ], [ 1, 2 ], [ 3, 4 ], [ 3, 4 ] ] ],[128X[104X
    [4X[28X  vertices := [ [ 1, "A" ], [ 1, "B" ], [ 2, "A" ], [ 2, "B" ] ] )[128X[104X
    [4X[28X						[128X[104X
  [4X[32X[104X
  
  [33X[0;0YОбъединение  происходит  путем  слияния  соответствующих  списков.  При этом
  индексы второго политопа увеличиваются.[133X
  
  [1X1.7-2 PolDoubleCone[101X
  
  [29X[2XPolDoubleCone[102X( [3Xpol[103X ) [32X функция
  
  [33X[0;0YMake a double cone with vertices V1 and V2 over the given polytope [22Xpol.[122X[133X
  
  [4X[32X  Пример  [32X[104X
    [4X[25Xgap>[125X [27XPolDoubleCone(s1);[127X[104X
    [4X[28Xrec([128X[104X
    [4X[28X  faces := [ [ [ 1, 2 ], [ 1, 2 ], [ 1, 3 ], [ 2, 3 ], [ 1, 4 ], [ 2, 4 ] ],[128X[104X
    [4X[28X      [ [ 1, 3, 4 ], [ 2, 3, 4 ], [ 1, 5, 6 ], [ 2, 5, 6 ] ] ],[128X[104X
    [4X[28X  vertices := [ "A", "B", "V1", "V2" ] )[128X[104X
    [4X[28X						[128X[104X
  [4X[32X[104X
  
  [1X1.7-3 ConnectedSum[101X
  
  [29X[2XConnectedSum[102X( [3XN[103X, [3XM[103X ) [32X функция
  
  [33X[0;0YФукнция создает связную сумму двух политопов [22XN[122X и [22XM[122X одинаковой размерности.[133X
  
  [4X[32X  Пример  [32X[104X
    [4X[25Xgap>[125X [27Xs2:=sphereAB(2);;[127X[104X
    [4X[25Xgap>[125X [27XConnectedSum(s2,s2);[127X[104X
    [4X[28Xrec([128X[104X
    [4X[28X  faces := [ [ [ 1, 2 ], [ 1, 2 ], [ 1, 2 ], [ 1, 2 ] ],[128X[104X
    [4X[28X      [ [ 1, 3 ], [ 1, 2 ], [ 3, 4 ], [ 2, 4 ] ] ],[128X[104X
    [4X[28X  vertices := [ [ 1, "A" ], [ 1, "B" ] ] )[128X[104X
    [4X[28X						[128X[104X
  [4X[32X[104X
  
  [1X1.7-4 PolProduct[101X
  
  [29X[2XPolProduct[102X( [3Xpol1[103X, [3Xpol2[103X ) [32X функция
  
  [33X[0;0YФункция  вычисляет  декартово  произведение  двух  шаровых комплексов pol1 и
  pol2.  Декартово  произведение  для двух шаровых комплексов определяется как
  шаровой комплекс составленный из всевозможных шаров [22XD^s_i × D^t_j[122X, где [22XD^s_i[122X
  и [22XD^t_j[122X клетки комплексов [22XM[122X и [22XN[122X, соответственно.[133X
  
  [4X[32X  Пример  [32X[104X
    [4X[25Xgap>[125X [27XPolProduct(s1,s1);[127X[104X
    [4X[28Xrec([128X[104X
    [4X[28X  faces :=[128X[104X
    [4X[28X    [ [ [ 1, 2 ], [ 1, 2 ], [ 3, 4 ], [ 3, 4 ], [ 1, 3 ], [ 2, 4 ], [ 1, 3 ],[128X[104X
    [4X[28X          [ 2, 4 ] ],[128X[104X
    [4X[28X      [ [ 1, 3, 5, 6 ], [ 2, 4, 5, 6 ], [ 1, 3, 7, 8 ], [ 2, 4, 7, 8 ] ] ],[128X[104X
    [4X[28X  vertices := [ [ "A", "A" ], [ "A", "B" ], [ "B", "A" ], [ "B", "B" ] ] )[128X[104X
    [4X[28X						[128X[104X
  [4X[32X[104X
  
  [1X1.7-5 ImageInPolProduct[101X
  
  [29X[2XImageInPolProduct[102X( [3Xpol1[103X, [3Xpol2[103X, [3Xkl1xkl2[103X ) [32X функция
  
  [33X[0;0YВспомогательная  функция  для декартова произведения, вычисляет адрес клетки
  составленной  как  произведение  клеток  [22Xkl1[122X и [22Xkl2[122X из политопов [22Xpol1[122X и [22Xpol2,[122X
  соответственно.  На  вход  функции  адреса  клеток  подаются  объединенные в
  список.[133X
  
  [4X[32X  Пример  [32X[104X
    [4X[25Xgap>[125X [27Xt2:=PolProduct(s1,s1);;[127X[104X
    [4X[25Xgap>[125X [27XImageInPolProduct(s1,s1,[[1,2],[1,1]]);[127X[104X
    [4X[28X[ 2, 3 ][128X[104X
    [4X[28X						[128X[104X
  [4X[32X[104X
  
  [33X[0;0YВ  качестве входных данных функции могут поступить не только политопы pol1 и
  pol2,  но  и  именованные  списки  по  размерностям,  каждой размерности k в
  котором  сопоставлена  мощность  клеток  размерности  k.  Данная возможность
  позволяет  не вычислять эту информацию, при частом вызове функции для одного
  и того же декартова произведения.[133X
  
  [4X[32X  Пример  [32X[104X
    [4X[25Xgap>[125X [27Xls1:=rec(0:=2, 1:=2);[127X[104X
    [4X[28Xrec( 0 := 2, 1 := 2 )[128X[104X
    [4X[25Xgap>[125X [27XImageInPolProduct(ls1,ls1,[[1,2],[1,1]]);[127X[104X
    [4X[28X[ 2, 3 ][128X[104X
    [4X[28X						[128X[104X
  [4X[32X[104X
  
  [33X[0;0YОбратим   внимание,   что   функция  вычисляет  клетку  только  в  комплексе
  составленном   функцией  PolProduct.  Если  произошло  какое-либо  изменение
  комплекса, указанный адрес может оказаться не корректным.[133X
  
  [1X1.7-6 PreimageInPolProduct[101X
  
  [29X[2XPreimageInPolProduct[102X( [3Xpol1[103X, [3Xpol2[103X, [3Ximageface[103X ) [32X функция
  
  [33X[0;0YПо  заданному  образу  в  декартовом  произведении  политопов  pol1  и  pol2
  указываем из каких клеток была составлена данная клетка imageface.[133X
  
  [1X1.7-7 PolProductSyms[101X
  
  [29X[2XPolProductSyms[102X(  ) [32X функция
  
  [33X[0;0YCartesian   product   of   two  polytopes  with  symmetries  of  multipliers
  transferred  to  it. First go the symmetries of the first multiplier, then -
  the second.[133X
  
  [1X1.7-8 PolProductSymsDict[101X
  
  [29X[2XPolProductSymsDict[102X(  ) [32X функция
  
  [33X[0;0YCartesian   product   of   two  polytopes  with  symmetries  of  multipliers
  transferred  to  it. First go the symmetries of the first multiplier, then -
  the second. Also returns the face dictionary.[133X
  
  [1X1.7-9 PolFactorInvolution[101X
  
  [29X[2XPolFactorInvolution[102X( [3Xpol[103X, [3Xinvol[103X ) [32X функция
  
  [33X[0;0Y[22Xpol[122X  is  polytope  with  symmetries,  [22Xinvol[122X  is  such  a list of some of its
  symmetries  (repetitions  possible)  that  it  is  known that the product of
  symmetries in s is an involution returns the factored polytope.[133X
  
  
  [1X1.8 [33X[0;0YОсновные принципы перестроек шаровых комплексов[133X[101X
  
  [33X[0;0YВ  данном  разделе  рассказывается об основных принципах перестройки шаровых
  комплексов  связанных  с  изменением индексации клеток. Изменение индексации
  клеток  является  одной  из  основных  трудностей  для  быстрого  и удобного
  построения  программ.  Во  второй версии пакета [22XPL[122X мы пользовались следующей
  идеей.  По  возможности адреса клеток которые не участвуют в операции должны
  остаться  неизменными. Тем не менее это не всегда возможно, когда, например,
  клетка удаляется из политопа. Если не удается избежать смещение индексов, то
  по   возможности  необходимо  сделать  так,  что  бы  индексы  изменились  у
  минимального   количества  индексов.  Та  особенность,  что  все  построение
  политопа  привязана  к позиции соответствующих клеток в списках pol.faces[k]
  осложняет  работу  связанную  с  перестройкой  комплексов. Начиная с третьей
  версии  пакета  [22XPL[122X будет организована возможность жесткой индексации клеток,
  когда  позиция  клетки  в списке pol.faces[k] является одновременно и именем
  этой клетки. Это, например, будет означать, что в списках pol.faces[k] могут
  присутствовать  пустые  адреса.  На  данный  момент  присутствуют  следующие
  функции  позволяющие корректно изменять структуру политопа и прикрепленную к
  нему информацию.[133X
  
  [1X1.8-1 DelFace[101X
  
  [29X[2XDelFace[102X( [3Xpol[103X, [3Xadr[103X ) [32X функция
  
  [33X[0;0Yклетка  [22Xadr[122X корректным образом исключается из политопа [22Xpol.[122X После проведения
  данной операции корректность данных может быть нарушена.[133X
  
  [4X[32X  Пример  [32X[104X
    [4X[25Xgap>[125X [27Xpol:=DelFace(t2,[1,2]);;[127X[104X
    [4X[25Xgap>[125X [27XIsPolytope(pol);[127X[104X
    [4X[28Xfalse[128X[104X
    [4X[28X					[128X[104X
  [4X[32X[104X
  
  [33X[0;0YФункция  содержит  наиболее  часто  встречающийся  код  в  функциях  который
  позволяет  корректно  удалить  все  упоминания о данной клетке и подготовить
  данные для дальнейшей работы алгоритма.[133X
  
  [1X1.8-2 wasDelFace[101X
  
  [29X[2XwasDelFace[102X( [3Xpol[103X, [3Xadr[103X ) [32X функция
  
  [33X[0;0YФункция  корректирует  сопуствующую  информацию прикрепленную к политопу [22Xpol[122X
  которая  должна  была  измениться  после  удаления  одной из клеток. На вход
  функции  подается политоп и адрес той клетки которая была удалена. Напомним,
  что   после  удаления  клетки  индексы  больших  клеток  данной  размерности
  понижаются  на  едининцу,  это изменение индексации должно быть отображено в
  той  информации  которая  сопутствует  данному  шаровому  комплексу. Если из
  какой-либо  сопуствующей  информации  была удалена клетка, то будет выведено
  соответствующее  сообщение,  но  изменения  будут  проведены.  При обработке
  информации  по  2-узле  в  политопе будет, в случае если удаляется 2-клетка,
  будет  выведено  соответствующее  сообщение, индекс 2-клетки будет удален из
  списка    .2knot.sheets,   если   на   данную   2-клетку   есть   ссылка   в
  .2knot.dpoints.(1kl), то соответсвующая позиция будет очищена.[133X
  
